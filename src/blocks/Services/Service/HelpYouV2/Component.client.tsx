'use client'

import type { Page, Media, Service } from '@/payload-types'
import { getMediaUrl, getMediaAlt } from '@/utilities/getMediaUrl'
import RichText from '@/components/RichText'
import Image from 'next/image'

type HelpYouV2BlockProps = Extract<Service['layout'][0], { blockType: 'help-you-v2' }>

const CheckIcon = () => (
  <svg
    className="w-10 h-10 md:w-12 md:h-12 flex-shrink-0"
    viewBox="0 0 43 43"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M18.8648 26.7812C18.526 26.7552 18.2108 26.5976 17.9868 26.3421L12.7184 21.0738C12.6011 20.828 12.5628 20.5519 12.6088 20.2834C12.6549 20.015 12.783 19.7674 12.9756 19.5748C13.1682 19.3822 13.4158 19.2541 13.6842 19.208C13.9527 19.162 14.2288 19.2003 14.4746 19.3176L18.8122 23.6553L33.7919 8.78093C34.0376 8.66355 34.3138 8.62526 34.5822 8.67131C34.8506 8.71737 35.0982 8.84552 35.2908 9.03811C35.4834 9.2307 35.6115 9.47827 35.6576 9.74671C35.7037 10.0152 35.6654 10.2913 35.548 10.5371L19.7429 26.3421C19.5189 26.5976 19.2037 26.7552 18.8648 26.7812Z"
      fill="#EF6C33"
    />
    <path
      d="M21.4995 36.878C18.6747 36.8735 15.9028 36.112 13.4722 34.6727C11.0415 33.2335 9.04104 31.1692 7.67887 28.6945C6.64485 26.8499 6.005 24.8108 5.79982 22.7061C5.47842 19.619 6.07309 16.5056 7.50966 13.7543C8.94623 11.0029 11.1611 8.73546 13.878 7.23474C15.7225 6.20072 17.7617 5.56087 19.8663 5.35569C21.9634 5.13207 24.084 5.33517 26.1006 5.95277C26.2805 5.98872 26.4509 6.06187 26.6009 6.16752C26.7509 6.27318 26.8772 6.40902 26.9717 6.56632C27.0661 6.72363 27.1267 6.89894 27.1494 7.08101C27.1722 7.26307 27.1566 7.44789 27.1038 7.6236C27.051 7.79932 26.962 7.96205 26.8426 8.10137C26.7232 8.2407 26.576 8.35354 26.4105 8.43266C26.2449 8.51179 26.0647 8.55545 25.8813 8.56085C25.6979 8.56625 25.5153 8.53327 25.3454 8.46402C23.6397 7.95016 21.8484 7.78297 20.0771 7.97231C18.3259 8.15015 16.6291 8.68189 15.0897 9.53525C13.606 10.3538 12.2942 11.4509 11.2262 12.7665C10.1267 14.1067 9.30555 15.6528 8.81102 17.3144C8.31648 18.9759 8.15846 20.7194 8.34619 22.4427C8.52404 24.1939 9.05577 25.8906 9.90914 27.4301C10.7277 28.9138 11.8248 30.2256 13.1404 31.2936C14.4806 32.3931 16.0267 33.2142 17.6882 33.7088C19.3498 34.2033 21.0933 34.3613 22.8166 34.1736C24.5678 33.9958 26.2645 33.464 27.804 32.6107C29.2877 31.7921 30.5995 30.695 31.6675 29.3794C32.767 28.0392 33.5881 26.4931 34.0827 24.8315C34.5772 23.17 34.7352 21.4265 34.5475 19.7032C34.5126 19.3376 34.6243 18.973 34.8581 18.6898C35.092 18.4066 35.4287 18.2278 35.7943 18.1929C36.1599 18.158 36.5245 18.2697 36.8077 18.5036C37.0909 18.7374 37.2697 19.0741 37.3046 19.4398C37.6244 22.5287 37.0271 25.6434 35.5873 28.395C34.1475 31.1465 31.929 33.4129 29.2089 34.9112C27.3447 35.9875 25.274 36.6578 23.1327 36.878H21.4995Z"
      fill="#EF6C33"
    />
  </svg>
)

const QualityIcon = () => (
  <svg
    className="w-12 h-12 md:w-14 md:h-14 flex-shrink-0"
    viewBox="0 0 51 51"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <rect width="50.2852" height="50.2852" rx="25.1426" fill="#FCE8E3" />
    <rect
      x="0.785706"
      y="0.785706"
      width="48.7137"
      height="48.7137"
      rx="24.3569"
      stroke="#EE6C4D"
      strokeOpacity="0.23"
      strokeWidth="1.57141"
    />
    <g clipPath="url(#clip0_18807_9756)">
      <path
        d="M39.7166 25.4728C40.3887 24.1432 40.1104 22.565 39.0242 21.5455L37.4476 20.0657C37.0839 19.7245 36.8616 19.3393 36.7478 18.8536L36.2546 16.7485C35.9149 15.298 34.6872 14.2678 33.1997 14.1851L31.0408 14.065C30.5428 14.0373 30.1249 13.8852 29.7257 13.5864L27.9947 12.2907C26.8022 11.398 25.1995 11.3979 24.0068 12.2907L22.2759 13.5863C21.8766 13.8852 21.4586 14.0373 20.9607 14.065L18.8019 14.1851C17.3144 14.2678 16.0867 15.298 15.7469 16.7485L15.2537 18.8537C15.14 19.3393 14.9176 19.7245 14.554 20.0658L12.9774 21.5455C11.8911 22.565 11.6128 24.1432 12.2849 25.4728L13.2603 27.4024C13.4854 27.8476 13.5626 28.2855 13.5034 28.7807L13.2467 30.9277C13.07 32.4068 13.8712 33.7947 15.2406 34.3812L17.2283 35.2325C17.6867 35.4288 18.0274 35.7146 18.3004 36.132L19.4839 37.9416C20.2992 39.1884 21.8051 39.7366 23.2312 39.3055L25.3009 38.6801C25.7784 38.5357 26.2231 38.5358 26.7004 38.6801L28.7702 39.3055C29.0947 39.4036 29.4231 39.451 29.7468 39.451C30.8456 39.4509 31.8877 38.9047 32.5175 37.9416L33.701 36.132C33.974 35.7146 34.3147 35.4288 34.7731 35.2324L36.7608 34.3812C38.1302 33.7946 38.9315 32.4068 38.7547 30.9276L38.498 28.7806C38.4388 28.2854 38.516 27.8474 38.7411 27.4023L39.7166 25.4728ZM37.9304 26.9926C37.6251 27.5966 37.5158 28.2167 37.5961 28.8885L37.8527 31.0355C37.9833 32.1276 37.4143 33.1131 36.4032 33.5462L34.4156 34.3974C33.7936 34.6638 33.3112 35.0686 32.9408 35.6349L31.7573 37.4445C31.1553 38.365 30.0859 38.7542 29.0331 38.436L26.9633 37.8105C26.6395 37.7126 26.3202 37.6637 26.0008 37.6637C25.6814 37.6637 25.362 37.7126 25.0382 37.8105L22.9684 38.436C21.9156 38.7541 20.8463 38.365 20.2442 37.4445L19.0608 35.6349C18.6903 35.0685 18.2079 34.6638 17.5859 34.3974L15.5983 33.5462C14.5872 33.1132 14.0182 32.1276 14.1488 31.0355L14.4054 28.8885C14.4858 28.2167 14.3764 27.5965 14.0711 26.9926L13.0956 25.0629C12.5995 24.0813 12.797 22.9607 13.599 22.2079L15.1757 20.7281C15.669 20.2651 15.9839 19.7197 16.1382 19.0609L16.6315 16.9557C16.8823 15.8847 17.754 15.1532 18.8523 15.0922L21.0111 14.9721C21.6867 14.9345 22.2785 14.7191 22.8202 14.3136L24.5512 13.0179C25.4317 12.3588 26.5697 12.3588 27.4503 13.0179L29.1813 14.3136C29.723 14.7191 30.3148 14.9345 30.9904 14.9721L33.1492 15.0922C34.2475 15.1533 35.1191 15.8847 35.37 16.9557L35.8632 19.0609C36.0176 19.7198 36.3325 20.2652 36.8258 20.7281L38.4024 22.2079C39.2044 22.9606 39.402 24.0813 38.9058 25.0629L37.9304 26.9926ZM26.0008 16.2493C20.8804 16.2493 16.7148 20.4149 16.7148 25.5353C16.7148 30.6557 20.8804 34.8214 26.0008 34.8214C31.1212 34.8214 35.2869 30.6557 35.2869 25.5353C35.2869 20.4149 31.1212 16.2493 26.0008 16.2493ZM26.0008 33.9129C21.3814 33.9129 17.6232 30.1547 17.6232 25.5353C17.6232 20.9159 21.3814 17.1577 26.0008 17.1577C30.6202 17.1577 34.3784 20.9159 34.3784 25.5353C34.3784 30.1547 30.6202 33.9129 26.0008 33.9129ZM29.8671 21.3263C29.8649 21.3263 29.8626 21.3263 29.8603 21.3263C29.4064 21.328 28.9808 21.5064 28.6618 21.8286L24.895 25.6329L23.3394 24.0772C23.0181 23.756 22.5909 23.579 22.1365 23.579C21.6819 23.579 21.2548 23.756 20.9335 24.0773C20.2702 24.7406 20.2702 25.8198 20.9335 26.4831L23.6964 29.246C24.0281 29.5776 24.4637 29.7435 24.8993 29.7435C25.335 29.7435 25.7707 29.5777 26.1023 29.246C27.1499 28.1985 28.2068 27.1263 29.229 26.0896C29.8432 25.4666 30.4575 24.8436 31.0732 24.2221C31.732 23.5573 31.7285 22.4801 31.0655 21.8208C30.7447 21.5016 30.3194 21.3263 29.8671 21.3263ZM30.4279 23.5826C29.8116 24.2046 29.1968 24.8282 28.582 25.4517C27.561 26.4874 26.5052 27.5583 25.4599 28.6036C25.1508 28.9127 24.6478 28.9127 24.3388 28.6036L21.5759 25.8406C21.2669 25.5316 21.2669 25.0286 21.5759 24.7195C21.7256 24.5698 21.9247 24.4874 22.1365 24.4874C22.3482 24.4874 22.5473 24.5698 22.697 24.7195L24.5754 26.598C24.6606 26.6832 24.7761 26.731 24.8966 26.731H24.8978C25.0186 26.7308 25.1344 26.6823 25.2194 26.5964L29.3074 22.4677C29.4554 22.3182 29.653 22.2354 29.8639 22.2346H29.867C30.0776 22.2346 30.2756 22.3163 30.425 22.4647C30.7333 22.7716 30.7347 23.2729 30.4279 23.5826Z"
        fill="#EF6C33"
      />
    </g>
    <defs>
      <clipPath id="clip0_18807_9756">
        <rect width="29.0711" height="29.0711" fill="white" transform="translate(11.4648 11)" />
      </clipPath>
    </defs>
  </svg>
)

export function HelpYouV2Client({
  title,
  description,
  'bottom-card': bottomCard,
  'help-you-list': helpYouList,
}: HelpYouV2BlockProps) {
  const checkIcon = 'https://wilsoncmsbucket.s3.eu-north-1.amazonaws.com/prime_check-circle-1.svg'

  return (
    <section className="py-16 md:py-20 bg-sky-900 text-white relative">
      <div className="container mx-auto px-4 md:px-8 lg:px-16">
        {/* Two Column Layout */}
        <div className="flex flex-col lg:flex-row gap-8 lg:gap-16 xl:gap-24">
          {/* Left Column - Title and Description */}
          <div className="lg:w-1/2 xl:w-2/5">
            {title && (
              <h2 className="text-3xl md:text-4xl lg:text-5xl font-normal text-white capitalize leading-tight mb-8">
                {title}
              </h2>
            )}
            {description && (
              <div className="text-lg font-normal leading-relaxed text-white">
                <RichText data={description} />
              </div>
            )}
          </div>

          {/* Right Column - Help You List */}
          <div className="lg:w-1/2 xl:w-3/5 space-y-6">
            {helpYouList &&
              helpYouList.map((item, index) => (
                <div
                  key={index}
                  className="flex items-start gap-4 pb-6 border-b border-white/20 last:border-b-0"
                >
                  {checkIcon ? (
                    <Image src={checkIcon} alt={'check'} width={50} height={50} />
                  ) : (
                    <CheckIcon />
                  )}
                  <div className="flex-1">
                    {item['list-description'] && (
                      <div className="text-white text-lg md:text-xl font-medium leading-relaxed">
                        <RichText data={item['list-description']} />
                      </div>
                    )}
                  </div>
                </div>
              ))}
          </div>
        </div>

        {/* Bottom Card */}
        {bottomCard && bottomCard['bottom-card-image'] && bottomCard['bottom-card-description'] && (
          <div className="mt-16 bg-sky-900 rounded-2xl border-2 border-sky-500/10 p-6 md:p-8 lg:p-12 flex items-center gap-6">
            {bottomCard['bottom-card-image'] ? (
              <Image
                src={getMediaUrl(bottomCard['bottom-card-image'])}
                alt={getMediaAlt(bottomCard['bottom-card-image'])}
                width={50}
                height={50}
              />
            ) : (
              <QualityIcon />
            )}
            <div className="flex-1">
              {bottomCard['bottom-card-description'] && (
                <div className="text-white text-lg md:text-xl font-normal leading-7">
                  <RichText data={bottomCard['bottom-card-description']} />
                </div>
              )}
            </div>
          </div>
        )}
      </div>
    </section>
  )
}
